@model IEnumerable<ManufacturingManagement_V2.Models.StockLedgerMdl>

@{
    ViewBag.Title = "Index";
    Layout = "~/views/shared/_LayoutCommon.cshtml";
}

<h4><b>Purchase List</b></h4>

<fieldset>
            @using (Ajax.BeginForm("FilterIndex", "Purchase", new AjaxOptions { UpdateTargetId = "divFilter" }))
            {
    <div class="form-group">
        @Html.ActionLink("Create New", "CreateUpdate", null, new { @class = "btn btn-default" })

        &nbsp;&nbsp;
        From&nbsp;@Html.TextBox("txtDtFrom", null, new { @class = "datepicker", style = "width:90px;" })
        &nbsp;To&nbsp;@Html.TextBox("txtDtTo", null, new { @class = "datepicker", style = "width:90px;" })
        &nbsp;&nbsp;<button class="btn btn-default">Submit</button>
    </div>
                
            }   
</fieldset>

<table class="tablecontainer" style="width:100%;">
    <tr>
        <th style="width:30px;">
            S.No.
        </th>
        <th style="width:30px;">
            @Html.DisplayNameFor(model => model.VTypeName)
        </th>
        <th style="width:50px;">
            @Html.DisplayNameFor(model => model.VNo)
        </th>
        <th style="width:25px;">
            @Html.DisplayNameFor(model => model.VDate)
        </th>
        <th style="width:auto;">
            @Html.DisplayNameFor(model => model.ItemCode)
        </th>
        <th style="width:auto;">
            Vendor
        </th>
        <th style="width:100px;">
            Qty/Unit
        </th>
         <th style="width:auto;">
            @Html.DisplayNameFor(model => model.Remarks)
        </th>
        <th style="width:80px;">Links</th>
    </tr>
    @{int i = 1;}
@foreach (var item in Model) {
    <tr>
        <td>
            @i
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.VTypeName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.VNo)
        </td>
        <td>
            @Html.ValueFor(model => item.VDate, "{0:dd/MM/yyyy}")
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ItemCode)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ItemDesc)
        </td>
        <td>
            @Html.ValueFor(modelItem => item.Qty, "{0:##,##,##,##,##0.00}")
            <br/>@Html.DisplayFor(modelItem => item.UnitName)
        </td>
        <td class="indexColumn" style="width:auto;">
            @Html.DisplayFor(modelItem => item.Remarks)
        </td>
        <td>
            @Html.ActionLink("Edit", "CreateUpdate", new { id=item.RecId })
            <br/>@Html.ActionLink("Preview", "../PurchaseRegister/PurchaseInvoiceReport", 
                 new { purchaseid= item.RecId },new { @target = "_new;" })
            @Html.ActionLink("Details", "Details", new { id=item.RecId })
            <br/>@Html.ActionLink("ViewLog", "../EventLogReport/getLogDetail", 
                 new { tblid = 10, pkval = item.RecId }, new {@target="_blank" })
        </td>
    </tr>
    i++;
}

</table>

@section Scripts{
    
    <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
    <script type="text/javascript">
        $(function () {
            //$("input[type=text]").first().focus();
            //document.getElementById("txtAttDay").focus();
            document.getElementById("txtDtFrom").value = '@ViewBag.DtFrom';
            document.getElementById("txtDtTo").value = '@ViewBag.DtTo';
        });
    </script>
    <script type="text/javascript">
        $(".datepicker").datepicker({
            changeMonth: true,
            changeYear: true,
            dateFormat: "dd/mm/yy"
        });
    </script>
}


